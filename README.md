# Лабораторная работа №5. Хранение данных. Настройки и внешние файлы
- _Выполнил:_ Стан Богдан
- _Язык программирования:_ Java
- _API:_ https://ntv.ifmo.ru/file/journal/идентификатор_журнала.pdf

## Что делает приложение?
Приложение состоит из 1 экрана, который позволяет:
- вводить номер нужного журнала
- скачивать этот журнал
- переходить к просмотру в подходящем приложении
- удалять файл из памяти устройства.

_**Примечания**:_
- _кнопки "Смотреть" и "Удалить" становятся активными только после успешного скачивания файла журнала._
- _на ветке `instruction` содержится код для вывода уведомления с краткой инструкцией по использованию приложения (`popupWindow`)_

---

## Скачивание файла или действия после нажатия на кнопку "Скачать"
### 1. Проверка на получение идентификатора журнала
- если пользователь не указал ID журнала, то выведется сообщение _"Пожалуйста, введите номер журнала"_
- если пользователь указал ID журнала, то продолжится выполнение загрузки и выведется сообщение _"Файл загружается..."_

### 2. Создание папки для хранения файлов
- если Android 10+ версии, то приложению не требуется запрашивать дополнительные разрешения на доступ к хранилищу и достаточно следующего кода:
```java
private void createDirectoryAndDownload(String journalId) {
        File dir = new File(getExternalFilesDir(null), "JournalDownloads");
        if (!dir.exists()) {
            boolean isCreated = dir.mkdirs();  // Создаем директорию, если ее нет
            if (isCreated) {
                Log.d("Directory", "Directory created successfully");
            } else {
                Log.d("Directory", "Failed to create directory");
                Toast.makeText(this, "Ошибка при создании директории!", Toast.LENGTH_SHORT).show();
                return;  // Выход, если не удалось создать директорию
            }
        }
        // Запуск задачи по загрузке файла
        String fileUrl = "https://ntv.ifmo.ru/file/journal/" + journalId + ".pdf";
        new DownloadFileTask(MainActivity.this).execute(fileUrl, journalId);
    }
```
### 3. Скачивание файла
- если по указанному ID не находится журнал, то выведется сообщение _"Журнал не найден!"_
- если по указанному ID найден журнал и скачивание успешно, то все кнопки становятся активными и выводится сообщение _"Скачивание файла завершено!"_

---
## Просмотр загруженного файла
По нажатию на "Смотреть" откроется ботомшит с выбором подходящего приложения

## Удаление файла
По нажатию на "Удалить" файл удаляется из памяти устройства и выводится сообщение _"Файл удален"_

